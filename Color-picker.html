<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="favicon-16x16.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Picker & Converter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8fbff 0%, #e3f2fd 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .color-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(25, 118, 210, 0.1);
            padding: 40px;
            max-width: 1200px;
            width: 100%;
            border: 2px solid #e3f2fd;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #1976d2;
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .picker-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        .visual-picker {
            background: #f8fbff;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e3f2fd;
            text-align: center;
        }

        .picker-title {
            color: #1976d2;
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .color-picker-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .color-picker {
            width: 200px;
            height: 200px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .color-picker:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        .color-preview {
            background: #f8fbff;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e3f2fd;
        }

        .preview-title {
            color: #1976d2;
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .color-display {
            width: 100%;
            height: 200px;
            border-radius: 12px;
            border: 3px solid #e3f2fd;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            background: #ff0000;
        }

        .formats-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e3f2fd;
            margin-bottom: 25px;
        }

        .formats-title {
            color: #1976d2;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .formats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .format-item {
            background: #f8fbff;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e3f2fd;
            transition: all 0.3s ease;
        }

        .format-item:hover {
            border-color: #1976d2;
            transform: translateY(-2px);
        }

        .format-label {
            color: #1976d2;
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .format-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .format-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e3f2fd;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            color: #333;
            transition: all 0.3s ease;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
        }

        .format-input:focus {
            outline: none;
            border-color: #1976d2;
            box-shadow: 0 0 8px rgba(25, 118, 210, 0.2);
        }

        .rgb-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
        }

        .hsl-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
        }

        .input-label {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 5px;
            text-align: center;
        }

        .copy-btn {
            background: linear-gradient(45deg, #4caf50, #66bb6a);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .copy-btn:hover {
            background: linear-gradient(45deg, #388e3c, #4caf50);
            transform: translateY(-1px);
        }

        .copy-btn.copied {
            background: linear-gradient(45deg, #2196f3, #42a5f5);
        }

        .palette-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e3f2fd;
            margin-bottom: 25px;
        }

        .palette-title {
            color: #1976d2;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .palette-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .palette-color {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid #e3f2fd;
            transition: all 0.3s ease;
            position: relative;
        }

        .palette-color:hover {
            transform: scale(1.1);
            border-color: #1976d2;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .palette-color.selected {
            border-color: #1976d2;
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.3);
        }

        .harmony-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e3f2fd;
            margin-bottom: 25px;
        }

        .harmony-title {
            color: #1976d2;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .harmony-options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .harmony-btn {
            padding: 8px 16px;
            background: #f8fbff;
            color: #1976d2;
            border: 2px solid #e3f2fd;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .harmony-btn:hover, .harmony-btn.active {
            background: #1976d2;
            color: white;
        }

        .harmony-colors {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .harmony-color {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            border: 3px solid #e3f2fd;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .harmony-color:hover {
            transform: scale(1.05);
            border-color: #1976d2;
        }

        .color-info {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7em;
            color: #666;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
        }

        .analysis-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e3f2fd;
            margin-bottom: 25px;
        }

        .analysis-title {
            color: #1976d2;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .analysis-item {
            background: #f8fbff;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e3f2fd;
            text-align: center;
        }

        .analysis-value {
            font-size: 1.5em;
            font-weight: 700;
            color: #1976d2;
            margin-bottom: 8px;
        }

        .analysis-label {
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 1px;
        }

        .features-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e3f2fd;
            margin-bottom: 20px;
        }

        .features-title {
            color: #1976d2;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .feature-item {
            background: #f8fbff;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e3f2fd;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            border-color: #1976d2;
        }

        .feature-icon {
            font-size: 1.5em;
            color: #1976d2;
        }

        .feature-text {
            color: #333;
            font-weight: 500;
            font-size: 0.95em;
        }

        .success-message {
            padding: 12px 20px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            font-weight: 600;
            font-size: 0.9em;
            display: none;
            background: #e8f5e8;
            color: #2e7d32;
            border: 2px solid #c8e6c9;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .color-container {
                padding: 25px;
            }

            .header h1 {
                font-size: 2em;
            }

            .picker-section {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .formats-grid {
                grid-template-columns: 1fr;
            }

            .color-picker {
                width: 150px;
                height: 150px;
            }

            .color-display {
                height: 150px;
            }

            .palette-grid {
                grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            }

            .palette-color {
                width: 50px;
                height: 50px;
            }

            .harmony-colors {
                justify-content: center;
            }

            .harmony-color {
                width: 60px;
                height: 60px;
            }

            .analysis-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .harmony-options {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .color-container {
                padding: 20px;
                margin: 5px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .color-picker {
                width: 120px;
                height: 120px;
            }

            .color-display {
                height: 120px;
            }

            .analysis-grid {
                grid-template-columns: 1fr;
            }

            .rgb-inputs, .hsl-inputs {
                grid-template-columns: 1fr;
            }

            .harmony-color {
                width: 50px;
                height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="color-container">
        <div class="header">
            <h1>🎨 Color Picker & Converter</h1>
            <p>Pick colors visually and convert between HEX, RGB, and HSL formats</p>
        </div>

        <div class="picker-section">
            <div class="visual-picker">
                <div class="picker-title">
                    🎯 Visual Color Picker
                </div>
                <div class="color-picker-wrapper">
                    <input type="color" class="color-picker" id="colorPicker" value="#ff0000" onchange="updateFromPicker()">
                    <button class="copy-btn" onclick="copyCurrentColor()">
                        📋 Copy Current Color
                    </button>
                </div>
            </div>

            <div class="color-preview">
                <div class="preview-title">
                    👁️ Color Preview
                </div>
                <div class="color-display" id="colorDisplay"></div>
            </div>
        </div>

        <div class="formats-section">
            <div class="formats-title">
                🔧 Color Formats
            </div>
            <div class="formats-grid">
                <div class="format-item">
                    <div class="format-label">
                        # HEX Color
                    </div>
                    <div class="format-input-group">
                        <input type="text" class="format-input" id="hexInput" placeholder="#FF0000" maxlength="7" oninput="updateFromHex()">
                        <button class="copy-btn" onclick="copyFormat('hex')">
                            📋 Copy
                        </button>
                    </div>
                </div>

                <div class="format-item">
                    <div class="format-label">
                        🔴 RGB Color
                    </div>
                    <div class="rgb-inputs">
                        <div>
                            <div class="input-label">R (0-255)</div>
                            <input type="number" class="format-input" id="rInput" min="0" max="255" placeholder="255" oninput="updateFromRGB()">
                        </div>
                        <div>
                            <div class="input-label">G (0-255)</div>
                            <input type="number" class="format-input" id="gInput" min="0" max="255" placeholder="0" oninput="updateFromRGB()">
                        </div>
                        <div>
                            <div class="input-label">B (0-255)</div>
                            <input type="number" class="format-input" id="bInput" min="0" max="255" placeholder="0" oninput="updateFromRGB()">
                        </div>
                    </div>
                    <button class="copy-btn" onclick="copyFormat('rgb')">
                        📋 Copy RGB
                    </button>
                </div>

                <div class="format-item">
                    <div class="format-label">
                        🌈 HSL Color
                    </div>
                    <div class="hsl-inputs">
                        <div>
                            <div class="input-label">H (0-360)</div>
                            <input type="number" class="format-input" id="hInput" min="0" max="360" placeholder="0" oninput="updateFromHSL()">
                        </div>
                        <div>
                            <div class="input-label">S (0-100)</div>
                            <input type="number" class="format-input" id="sInput" min="0" max="100" placeholder="100" oninput="updateFromHSL()">
                        </div>
                        <div>
                            <div class="input-label">L (0-100)</div>
                            <input type="number" class="format-input" id="lInput" min="0" max="100" placeholder="50" oninput="updateFromHSL()">
                        </div>
                    </div>
                    <button class="copy-btn" onclick="copyFormat('hsl')">
                        📋 Copy HSL
                    </button>
                </div>
            </div>
        </div>

        <div class="palette-section">
            <div class="palette-title">🎨 Color Palette</div>
            <div class="palette-grid" id="colorPalette"></div>
        </div>

        <div class="harmony-section">
            <div class="harmony-title">🔄 Color Harmony</div>
            <div class="harmony-options">
                <button class="harmony-btn active" onclick="generateHarmony('complementary')">Complementary</button>
                <button class="harmony-btn" onclick="generateHarmony('triadic')">Triadic</button>
                <button class="harmony-btn" onclick="generateHarmony('analogous')">Analogous</button>
                <button class="harmony-btn" onclick="generateHarmony('split')">Split Complementary</button>
                <button class="harmony-btn" onclick="generateHarmony('tetradic')">Tetradic</button>
            </div>
            <div class="harmony-colors" id="harmonyColors"></div>
        </div>

        <div class="analysis-section">
            <div class="analysis-title">📊 Color Analysis</div>
            <div class="analysis-grid">
                <div class="analysis-item">
                    <div class="analysis-value" id="brightnessValue">50%</div>
                    <div class="analysis-label">Brightness</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-value" id="saturationValue">100%</div>
                    <div class="analysis-label">Saturation</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-value" id="hueValue">0°</div>
                    <div class="analysis-label">Hue</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-value" id="luminanceValue">0.21</div>
                    <div class="analysis-label">Luminance</div>
                </div>
            </div>
        </div>

        <div class="features-section">
            <div class="features-title">✨ Color Tool Features</div>
            <div class="features-grid">
                <div class="feature-item">
                    <div class="feature-icon">🎯</div>
                    <div class="feature-text">Visual color picker with instant preview</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🔄</div>
                    <div class="feature-text">Real-time conversion between formats</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🎨</div>
                    <div class="feature-text">Color harmony generation</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">📋</div>
                    <div class="feature-text">One-click copy for all formats</div>
                </div>
            </div>
        </div>

        <div class="success-message" id="successMessage">Color copied to clipboard!</div>
    </div>

    <script>
        let currentColor = { r: 255, g: 0, b: 0 };
        let currentHarmonyType = 'complementary';

        // Color palette
        const defaultPalette = [
            '#FF0000', '#FF8000', '#FFFF00', '#80FF00', '#00FF00', '#00FF80',
            '#00FFFF', '#0080FF', '#0000FF', '#8000FF', '#FF00FF', '#FF0080',
            '#FFFFFF', '#E0E0E0', '#C0C0C0', '#A0A0A0', '#808080', '#606060',
            '#404040', '#202020', '#000000', '#FF6B6B', '#4ECDC4', '#45B7D1',
            '#96CEB4', '#FECA57', '#FF9FF3', '#54A0FF', '#5F27CD', '#00D2D3',
            '#FF9F43', '#10AC84', '#EE5A24', '#0ABDE3', '#FFC312', '#C4E538'
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializePalette();
            updateAllFormats();
            generateHarmony('complementary');
            
            // Add entrance animation
            document.querySelector('.color-container').style.opacity = '0';
            document.querySelector('.color-container').style.transform = 'translateY(30px)';
            
            setTimeout(() => {
                document.querySelector('.color-container').style.transition = 'all 0.6s ease';
                document.querySelector('.color-container').style.opacity = '1';
                document.querySelector('.color-container').style.transform = 'translateY(0)';
            }, 100);
        });

        function initializePalette() {
            const paletteGrid = document.getElementById('colorPalette');
            paletteGrid.innerHTML = '';
            
            defaultPalette.forEach(color => {
                const colorDiv = document.createElement('div');
                colorDiv.className = 'palette-color';
                colorDiv.style.backgroundColor = color;
                colorDiv.title = color;
                colorDiv.onclick = () => selectPaletteColor(color);
                paletteGrid.appendChild(colorDiv);
            });
        }

        function selectPaletteColor(color) {
            // Remove previous selection
            document.querySelectorAll('.palette-color').forEach(el => {
                el.classList.remove('selected');
            });
            
            // Add selection to clicked color
            event.target.classList.add('selected');
            
            // Update color picker and all formats
            document.getElementById('colorPicker').value = color;
            const rgb = hexToRgb(color);
            currentColor = rgb;
            updateAllFormats();
        }

        function updateFromPicker() {
            const hex = document.getElementById('colorPicker').value;
            const rgb = hexToRgb(hex);
            currentColor = rgb;
            updateAllFormats();
        }

        function updateFromHex() {
            const hex = document.getElementById('hexInput').value;
            if (isValidHex(hex)) {
                const rgb = hexToRgb(hex);
                currentColor = rgb;
                document.getElementById('colorPicker').value = hex;
                updateAllFormats(false, true, true);
            }
        }

        function updateFromRGB() {
            const r = parseInt(document.getElementById('rInput').value) || 0;
            const g = parseInt(document.getElementById('gInput').value) || 0;
            const b = parseInt(document.getElementById('bInput').value) || 0;
            
            currentColor = { r: Math.max(0, Math.min(255, r)), g: Math.max(0, Math.min(255, g)), b: Math.max(0, Math.min(255, b)) };
            const hex = rgbToHex(currentColor);
            document.getElementById('colorPicker').value = hex;
            updateAllFormats(true, false, true);
        }

        function updateFromHSL() {
            const h = parseInt(document.getElementById('hInput').value) || 0;
            const s = parseInt(document.getElementById('sInput').value) || 0;
            const l = parseInt(document.getElementById('lInput').value) || 0;
            
            const hsl = { h: Math.max(0, Math.min(360, h)), s: Math.max(0, Math.min(100, s)), l: Math.max(0, Math.min(100, l)) };
            const rgb = hslToRgb(hsl);
            currentColor = rgb;
            const hex = rgbToHex(rgb);
            document.getElementById('colorPicker').value = hex;
            updateAllFormats(true, true, false);
        }

        function updateAllFormats(skipRGB = false, skipHex = false, skipHSL = false) {
            // Update color display
            const hex = rgbToHex(currentColor);
            document.getElementById('colorDisplay').style.backgroundColor = hex;
            
            // Update HEX
            if (!skipHex) {
                document.getElementById('hexInput').value = hex;
            }
            
            // Update RGB
            if (!skipRGB) {
                document.getElementById('rInput').value = currentColor.r;
                document.getElementById('gInput').value = currentColor.g;
                document.getElementById('bInput').value = currentColor.b;
            }
            
            // Update HSL
            if (!skipHSL) {
                const hsl = rgbToHsl(currentColor);
                document.getElementById('hInput').value = Math.round(hsl.h);
                document.getElementById('sInput').value = Math.round(hsl.s);
                document.getElementById('lInput').value = Math.round(hsl.l);
            }
            
            // Update analysis
            updateColorAnalysis();
            
            // Update harmony
            generateHarmony(currentHarmonyType);
        }

        function updateColorAnalysis() {
            const hsl = rgbToHsl(currentColor);
            const luminance = getLuminance(currentColor);
            
            document.getElementById('brightnessValue').textContent = Math.round(hsl.l) + '%';
            document.getElementById('saturationValue').textContent = Math.round(hsl.s) + '%';
            document.getElementById('hueValue').textContent = Math.round(hsl.h) + '°';
            document.getElementById('luminanceValue').textContent = luminance.toFixed(2);
        }

        function generateHarmony(type) {
            currentHarmonyType = type;
            
            // Update active button
            document.querySelectorAll('.harmony-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const hsl = rgbToHsl(currentColor);
            const harmonyColors = [];
            
            switch(type) {
                case 'complementary':
                    harmonyColors.push(
                        currentColor,
                        hslToRgb({ h: (hsl.h + 180) % 360, s: hsl.s, l: hsl.l })
                    );
                    break;
                    
                case 'triadic':
                    harmonyColors.push(
                        currentColor,
                        hslToRgb({ h: (hsl.h + 120) % 360, s: hsl.s, l: hsl.l }),
                        hslToRgb({ h: (hsl.h + 240) % 360, s: hsl.s, l: hsl.l })
                    );
                    break;
                    
                case 'analogous':
                    harmonyColors.push(
                        hslToRgb({ h: (hsl.h - 30 + 360) % 360, s: hsl.s, l: hsl.l }),
                        currentColor,
                        hslToRgb({ h: (hsl.h + 30) % 360, s: hsl.s, l: hsl.l })
                    );
                    break;
                    
                case 'split':
                    harmonyColors.push(
                        currentColor,
                        hslToRgb({ h: (hsl.h + 150) % 360, s: hsl.s, l: hsl.l }),
                        hslToRgb({ h: (hsl.h + 210) % 360, s: hsl.s, l: hsl.l })
                    );
                    break;
                    
                case 'tetradic':
                    harmonyColors.push(
                        currentColor,
                        hslToRgb({ h: (hsl.h + 90) % 360, s: hsl.s, l: hsl.l }),
                        hslToRgb({ h: (hsl.h + 180) % 360, s: hsl.s, l: hsl.l }),
                        hslToRgb({ h: (hsl.h + 270) % 360, s: hsl.s, l: hsl.l })
                    );
                    break;
            }
            
            displayHarmonyColors(harmonyColors);
        }

        function displayHarmonyColors(colors) {
            const harmonyContainer = document.getElementById('harmonyColors');
            harmonyContainer.innerHTML = '';
            
            colors.forEach(color => {
                const colorDiv = document.createElement('div');
                colorDiv.className = 'harmony-color';
                const hex = rgbToHex(color);
                colorDiv.style.backgroundColor = hex;
                colorDiv.title = `Click to use this color (${hex})`;
                colorDiv.onclick = () => {
                    currentColor = color;
                    document.getElementById('colorPicker').value = hex;
                    updateAllFormats();
                };
                
                const info = document.createElement('div');
                info.className = 'color-info';
                info.textContent = hex;
                colorDiv.appendChild(info);
                
                harmonyContainer.appendChild(colorDiv);
            });
        }

        async function copyFormat(format) {
            let textToCopy = '';
            
            switch(format) {
                case 'hex':
                    textToCopy = document.getElementById('hexInput').value;
                    break;
                case 'rgb':
                    textToCopy = `rgb(${currentColor.r}, ${currentColor.g}, ${currentColor.b})`;
                    break;
                case 'hsl':
                    const hsl = rgbToHsl(currentColor);
                    textToCopy = `hsl(${Math.round(hsl.h)}, ${Math.round(hsl.s)}%, ${Math.round(hsl.l)}%)`;
                    break;
            }
            
            try {
                await navigator.clipboard.writeText(textToCopy);
                showSuccess(`${format.toUpperCase()} color copied to clipboard!`);
                
                // Update button appearance
                const btn = event.target;
                const originalText = btn.innerHTML;
                btn.innerHTML = '✅ Copied!';
                btn.classList.add('copied');
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.remove('copied');
                }, 2000);
                
            } catch (err) {
                showSuccess('Failed to copy. Please try again.');
            }
        }

        async function copyCurrentColor() {
            const hex = rgbToHex(currentColor);
            try {
                await navigator.clipboard.writeText(hex);
                showSuccess('Current color copied to clipboard!');
                
                const btn = event.target;
                const originalText = btn.innerHTML;
                btn.innerHTML = '✅ Copied!';
                btn.classList.add('copied');
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.remove('copied');
                }, 2000);
                
            } catch (err) {
                showSuccess('Failed to copy. Please try again.');
            }
        }

        // Color conversion functions
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function rgbToHex(rgb) {
            return "#" + ((1 << 24) + (rgb.r << 16) + (rgb.g << 8) + rgb.b).toString(16).slice(1);
        }

        function rgbToHsl(rgb) {
            let r = rgb.r / 255;
            let g = rgb.g / 255;
            let b = rgb.b / 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return {
                h: h * 360,
                s: s * 100,
                l: l * 100
            };
        }

        function hslToRgb(hsl) {
            let h = hsl.h / 360;
            let s = hsl.s / 100;
            let l = hsl.l / 100;
            
            let r, g, b;

            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };

                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }

            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }

        function getLuminance(rgb) {
            const rsRGB = rgb.r / 255;
            const gsRGB = rgb.g / 255;
            const bsRGB = rgb.b / 255;

            const r = rsRGB <= 0.03928 ? rsRGB / 12.92 : Math.pow((rsRGB + 0.055) / 1.055, 2.4);
            const g = gsRGB <= 0.03928 ? gsRGB / 12.92 : Math.pow((gsRGB + 0.055) / 1.055, 2.4);
            const b = bsRGB <= 0.03928 ? bsRGB / 12.92 : Math.pow((bsRGB + 0.055) / 1.055, 2.4);

            return 0.2126 * r + 0.7152 * g + 0.0722 * b;
        }

        function isValidHex(hex) {
            return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(hex);
        }

        function showSuccess(message) {
            const successElement = document.getElementById('successMessage');
            successElement.textContent = message;
            successElement.style.display = 'block';
            
            setTimeout(() => {
                successElement.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>
