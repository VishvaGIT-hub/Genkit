<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Counter Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 123, 255, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            padding: 30px;
        }

        .input-panel {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
        }

        .stats-panel {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
        }

        .section-title {
            color: #007bff;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 8px;
        }

        .text-input-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #e9ecef;
            margin-bottom: 20px;
            transition: border-color 0.3s ease;
        }

        .text-input-section:focus-within {
            border-color: #007bff;
        }

        .input-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .input-label {
            font-weight: 600;
            color: #007bff;
        }

        .live-counter {
            font-size: 0.9rem;
            color: #6c757d;
        }

        #textInput {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }

        #textInput:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .quick-btn {
            background: #e9ecef;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-btn:hover {
            background: #007bff;
            color: white;
        }

        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            justify-content: center;
            min-width: 120px;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #e9ecef;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: #007bff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.1);
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #007bff;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 600;
        }

        .detailed-stats {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #e9ecef;
            margin-bottom: 20px;
        }

        .detailed-title {
            font-weight: 600;
            color: #007bff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f8f9fa;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .detail-value {
            font-weight: 600;
            color: #007bff;
        }

        .reading-time {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #e9ecef;
            margin-bottom: 20px;
            text-align: center;
        }

        .reading-time-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #007bff;
            margin-bottom: 5px;
        }

        .reading-time-label {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .reading-note {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 8px;
            font-style: italic;
        }

        .export-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #e9ecef;
        }

        .export-title {
            font-weight: 600;
            color: #007bff;
            margin-bottom: 15px;
        }

        .export-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .frequency-analysis {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #e9ecef;
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .frequency-title {
            font-weight: 600;
            color: #007bff;
            margin-bottom: 15px;
        }

        .word-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
            border-bottom: 1px solid #f8f9fa;
        }

        .word-item:last-child {
            border-bottom: none;
        }

        .word-text {
            font-family: 'Courier New', monospace;
            color: #333;
        }

        .word-count {
            background: #007bff;
            color: white;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification.error {
            background: #dc3545;
        }

        /* Mobile Responsive */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .stats-panel {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .main-content {
                padding: 20px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .actions {
                flex-direction: column;
            }

            .btn {
                min-width: auto;
            }

            .input-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .quick-actions {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .main-content {
                padding: 15px;
            }

            .input-panel,
            .stats-panel {
                padding: 20px;
            }

            #textInput {
                min-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìù Word Counter Tool</h1>
            <p>Analyze your text with comprehensive word count, character analysis, and reading time estimation</p>
        </div>

        <div class="main-content">
            <div class="input-panel">
                <div class="section-title">Text Analysis</div>
                
                <div class="text-input-section">
                    <div class="input-header">
                        <div class="input-label">üìÑ Enter Your Text</div>
                        <div class="live-counter" id="liveCounter">0 words, 0 characters</div>
                    </div>
                    <textarea id="textInput" placeholder="Start typing or paste your text here to see real-time word count and analysis...

Try pasting an article, essay, or any text content to get detailed statistics including:
‚Ä¢ Word and character counts
‚Ä¢ Reading time estimation  
‚Ä¢ Sentence and paragraph analysis
‚Ä¢ Most frequently used words"></textarea>
                    
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="wordCounter.insertSample('article')">Sample Article</button>
                        <button class="quick-btn" onclick="wordCounter.insertSample('essay')">Sample Essay</button>
                        <button class="quick-btn" onclick="wordCounter.insertSample('business')">Business Text</button>
                        <button class="quick-btn" onclick="wordCounter.insertSample('creative')">Creative Writing</button>
                    </div>
                </div>

                <div class="actions">
                    <button class="btn btn-success" id="copyResultsBtn">
                        <span>üìã</span> Copy Results
                    </button>
                    <button class="btn btn-secondary" id="clearBtn">
                        <span>üóëÔ∏è</span> Clear Text
                    </button>
                </div>
            </div>

            <div class="stats-panel">
                <div class="section-title">Text Statistics</div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-value" id="wordCount">0</div>
                        <div class="stat-label">Words</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî§</div>
                        <div class="stat-value" id="charCount">0</div>
                        <div class="stat-label">Characters</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìè</div>
                        <div class="stat-value" id="charCountNoSpaces">0</div>
                        <div class="stat-label">Chars (No Spaces)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÑ</div>
                        <div class="stat-value" id="sentenceCount">0</div>
                        <div class="stat-label">Sentences</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìë</div>
                        <div class="stat-value" id="paragraphCount">0</div>
                        <div class="stat-label">Paragraphs</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="avgWordsPerSentence">0</div>
                        <div class="stat-label">Avg Words/Sentence</div>
                    </div>
                </div>

                <div class="reading-time">
                    <div class="reading-time-value" id="readingTime">0 min</div>
                    <div class="reading-time-label">üìñ Estimated Reading Time</div>
                    <div class="reading-note">Based on 200 words per minute</div>
                </div>

                <div class="detailed-stats">
                    <div class="detailed-title">
                        <span>üìà</span> Detailed Analysis
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Longest word</span>
                        <span class="detail-value" id="longestWord">-</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Average word length</span>
                        <span class="detail-value" id="avgWordLength">0</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Most common word</span>
                        <span class="detail-value" id="mostCommonWord">-</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Unique words</span>
                        <span class="detail-value" id="uniqueWords">0</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Lexical diversity</span>
                        <span class="detail-value" id="lexicalDiversity">0%</span>
                    </div>
                </div>

                <div class="frequency-analysis" id="frequencyAnalysis">
                    <div class="frequency-title">üî§ Most Frequent Words</div>
                    <div id="wordFrequencyList">
                        <div style="text-align: center; color: #6c757d; font-style: italic; padding: 20px;">
                            Enter text to see word frequency analysis
                        </div>
                    </div>
                </div>

                <div class="export-section">
                    <div class="export-title">üì§ Export Options</div>
                    <div class="export-actions">
                        <button class="btn btn-success" id="exportTxtBtn">
                            <span>üìÑ</span> Export as TXT
                        </button>
                        <button class="btn btn-success" id="exportCsvBtn">
                            <span>üìä</span> Export as CSV
                        </button>
                        <button class="btn btn-success" id="exportJsonBtn">
                            <span>üìã</span> Export as JSON
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification">
        Action completed successfully!
    </div>

    <script>
        class WordCounter {
            constructor() {
                this.textInput = document.getElementById('textInput');
                this.currentStats = {};
                
                this.sampleTexts = {
                    article: `Technology has revolutionized the way we communicate, work, and live. From smartphones to artificial intelligence, digital innovations continue to shape our daily experiences. The rapid pace of technological advancement brings both opportunities and challenges that society must navigate carefully.

Social media platforms have transformed how we connect with others, enabling instant communication across vast distances. However, this connectivity also raises concerns about privacy, misinformation, and the impact on mental health. As we embrace new technologies, it becomes crucial to maintain a balance between digital engagement and real-world interactions.

The future promises even more exciting developments, including autonomous vehicles, quantum computing, and advanced medical treatments. These innovations have the potential to solve complex problems and improve quality of life for millions of people worldwide.`,

                    essay: `Education plays a fundamental role in shaping individuals and society. It serves as the foundation for personal growth, critical thinking, and professional development. Throughout history, access to quality education has been a key factor in determining social mobility and economic prosperity.

Modern educational systems face numerous challenges, including adapting to technological changes, addressing diverse learning needs, and ensuring equitable access for all students. The COVID-19 pandemic highlighted both the importance of education and the need for flexible, innovative approaches to learning.

As we move forward, educational institutions must continue to evolve, incorporating new methodologies and technologies while maintaining their core mission of fostering knowledge, creativity, and responsible citizenship. The investment in education today will determine the leaders, innovators, and problem-solvers of tomorrow.`,

                    business: `Our company's quarterly performance exceeded expectations, with revenue increasing by 15% compared to the same period last year. This growth can be attributed to successful product launches, expanded market reach, and improved operational efficiency.

Key achievements include the introduction of three new product lines, establishment of partnerships in emerging markets, and implementation of advanced analytics systems. Customer satisfaction scores reached an all-time high of 94%, reflecting our commitment to quality and service excellence.

Looking ahead, we plan to invest in research and development, expand our digital presence, and strengthen our sustainability initiatives. These strategic investments will position us for continued growth while maintaining our competitive advantage in the marketplace.`,

                    creative: `The old lighthouse stood sentinel against the storm, its beacon cutting through the darkness like a sword of hope. Sarah watched from her cottage window as waves crashed against the rocky shore, each one telling a story of distant lands and forgotten dreams.

She remembered her grandfather's tales of the sea, how he would describe the lighthouse keeper's lonely vigil through countless nights. The light had guided ships safely home for over a century, a constant guardian in an ever-changing world.

As dawn approached, the storm began to subside. The lighthouse beam continued its faithful rotation, reminding Sarah that some things endure despite the chaos around them. She smiled, knowing that tomorrow would bring new stories to tell.`
                };

                this.initEventListeners();
                this.updateStats();
            }

            initEventListeners() {
                // Real-time text analysis
                this.textInput.addEventListener('input', () => {
                    this.updateStats();
                });

                // Action buttons
                document.getElementById('copyResultsBtn').addEventListener('click', () => {
                    this.copyResults();
                });

                document.getElementById('clearBtn').addEventListener('click', () => {
                    this.clearText();
                });

                // Export buttons
                document.getElementById('exportTxtBtn').addEventListener('click', () => {
                    this.exportResults('txt');
                });

                document.getElementById('exportCsvBtn').addEventListener('click', () => {
                    this.exportResults('csv');
                });

                document.getElementById('exportJsonBtn').addEventListener('click', () => {
                    this.exportResults('json');
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        if (e.key === 'l') {
                            e.preventDefault();
                            this.clearText();
                        }
                    }
                });
            }

            insertSample(type) {
                this.textInput.value = this.sampleTexts[type] || '';
                this.updateStats();
                this.showNotification(`${type.charAt(0).toUpperCase() + type.slice(1)} sample loaded!`);
            }

            updateStats() {
                const text = this.textInput.value;
                
                // Basic counts
                const words = this.countWords(text);
                const characters = text.length;
                const charactersNoSpaces = text.replace(/\s/g, '').length;
                const sentences = this.countSentences(text);
                const paragraphs = this.countParagraphs(text);

                // Advanced analysis
                const wordArray = this.getWordsArray(text);
                const avgWordsPerSentence = sentences > 0 ? Math.round(words / sentences) : 0;
                const readingTime = this.calculateReadingTime(words);
                const longestWord = this.findLongestWord(wordArray);
                const avgWordLength = this.calculateAverageWordLength(wordArray);
                const wordFrequency = this.analyzeWordFrequency(wordArray);
                const uniqueWords = Object.keys(wordFrequency).length;
                const lexicalDiversity = words > 0 ? Math.round((uniqueWords / words) * 100) : 0;

                // Store current stats
                this.currentStats = {
                    words,
                    characters,
                    charactersNoSpaces,
                    sentences,
                    paragraphs,
                    avgWordsPerSentence,
                    readingTime,
                    longestWord,
                    avgWordLength,
                    uniqueWords,
                    lexicalDiversity,
                    wordFrequency
                };

                // Update UI
                this.updateDisplay();
            }

            countWords(text) {
                if (!text.trim()) return 0;
                return text.trim().split(/\s+/).filter(word => word.length > 0).length;
            }

            countSentences(text) {
                if (!text.trim()) return 0;
                return text.split(/[.!?]+/).filter(sentence => sentence.trim().length > 0).length;
            }

            countParagraphs(text) {
                if (!text.trim()) return 0;
                return text.split(/\n\s*\n/).filter(paragraph => paragraph.trim().length > 0).length;
            }

            getWordsArray(text) {
                if (!text.trim()) return [];
                return text.toLowerCase()
                          .replace(/[^\w\s]/g, '')
                          .split(/\s+/)
                          .filter(word => word.length > 0);
            }

            calculateReadingTime(words) {
                const wordsPerMinute = 200;
                return Math.ceil(words / wordsPerMinute);
            }

            findLongestWord(wordArray) {
                if (wordArray.length === 0) return '-';
                return wordArray.reduce((longest, current) => 
                    current.length > longest.length ? current : longest
                );
            }

            calculateAverageWordLength(wordArray) {
                if (wordArray.length === 0) return 0;
                const totalLength = wordArray.reduce((sum, word) => sum + word.length, 0);
                return Math.round((totalLength / wordArray.length) * 10) / 10;
            }

            analyzeWordFrequency(wordArray) {
                const frequency = {};
                const commonWords = new Set(['the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'is', 'are', 'was', 'were', 'be', 'been', 'have', 'has', 'had', 'do', 'does', 'did', 'will', 'would', 'could', 'should', 'may', 'might', 'must', 'can', 'shall', 'it', 'he', 'she', 'they', 'we', 'you', 'i', 'me', 'him', 'her', 'them', 'us', 'my', 'your', 'his', 'her', 'its', 'our', 'their', 'this', 'that', 'these', 'those']);

                wordArray.forEach(word => {
                    if (word.length > 2 && !commonWords.has(word)) {
                        frequency[word] = (frequency[word] || 0) + 1;
                    }
                });

                return frequency;
            }

            updateDisplay() {
                const stats = this.currentStats;

                // Update live counter
                document.getElementById('liveCounter').textContent = 
                    `${stats.words} words, ${stats.characters} characters`;

                // Update main stats
                document.getElementById('wordCount').textContent = stats.words.toLocaleString();
                document.getElementById('charCount').textContent = stats.characters.toLocaleString();
                document.getElementById('charCountNoSpaces').textContent = stats.charactersNoSpaces.toLocaleString();
                document.getElementById('sentenceCount').textContent = stats.sentences.toLocaleString();
                document.getElementById('paragraphCount').textContent = stats.paragraphs.toLocaleString();
                document.getElementById('avgWordsPerSentence').textContent = stats.avgWordsPerSentence;

                // Update reading time
                document.getElementById('readingTime').textContent = 
                    stats.readingTime === 1 ? '1 min' : `${stats.readingTime} min`;

                // Update detailed stats
                document.getElementById('longestWord').textContent = stats.longestWord;
                document.getElementById('avgWordLength').textContent = `${stats.avgWordLength} chars`;
                document.getElementById('uniqueWords').textContent = stats.uniqueWords.toLocaleString();
                document.getElementById('lexicalDiversity').textContent = `${stats.lexicalDiversity}%`;

                // Update most common word
                const sortedWords = Object.entries(stats.wordFrequency)
                    .sort(([,a], [,b]) => b - a);
                const mostCommon = sortedWords.length > 0 ? 
                    `${sortedWords[0][0]} (${sortedWords[0][1]}x)` : '-';
                document.getElementById('mostCommonWord').textContent = mostCommon;

                // Update word frequency list
                this.updateWordFrequencyList(sortedWords);
            }

            updateWordFrequencyList(sortedWords) {
                const container = document.getElementById('wordFrequencyList');
                
                if (sortedWords.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: #6c757d; font-style: italic; padding: 20px;">Enter text to see word frequency analysis</div>';
                    return;
                }

                const top10 = sortedWords.slice(0, 10);
                container.innerHTML = top10.map(([word, count]) => `
                    <div class="word-item">
                        <span class="word-text">${this.escapeHtml(word)}</span>
                        <span class="word-count">${count}</span>
                    </div>
                `).join('');
            }

            copyResults() {
                const stats = this.currentStats;
                
                let results = 'TEXT ANALYSIS RESULTS\n';
                results += '===================\n\n';
                results += `Words: ${stats.words}\n`;
                results += `Characters: ${stats.characters}\n`;
                results += `Characters (no spaces): ${stats.charactersNoSpaces}\n`;
                results += `Sentences: ${stats.sentences}\n`;
                results += `Paragraphs: ${stats.paragraphs}\n`;
                results += `Average words per sentence: ${stats.avgWordsPerSentence}\n`;
                results += `Reading time: ${stats.readingTime} minute(s)\n`;
                results += `Longest word: ${stats.longestWord}\n`;
                results += `Average word length: ${stats.avgWordLength} characters\n`;
                results += `Unique words: ${stats.uniqueWords}\n`;
                results += `Lexical diversity: ${stats.lexicalDiversity}%\n\n`;

                const sortedWords = Object.entries(stats.wordFrequency)
                    .sort(([,a], [,b]) => b - a)
                    .slice(0, 10);

                if (sortedWords.length > 0) {
                    results += 'TOP 10 MOST FREQUENT WORDS:\n';
                    results += '===========================\n';
                    sortedWords.forEach(([word, count], index) => {
                        results += `${index + 1}. ${word}: ${count}\n`;
                    });
                }

                this.copyToClipboard(results);
                this.showNotification('Results copied to clipboard!');
            }

            clearText() {
                this.textInput.value = '';
                this.updateStats();
                this.textInput.focus();
                this.showNotification('Text cleared!');
            }

            exportResults(format) {
                const stats = this.currentStats;
                const timestamp = new Date().toISOString().slice(0, 19).replace(/[:-]/g, '');

                switch (format) {
                    case 'txt':
                        this.exportAsTxt(stats, timestamp);
                        break;
                    case 'csv':
                        this.exportAsCsv(stats, timestamp);
                        break;
                    case 'json':
                        this.exportAsJson(stats, timestamp);
                        break;
                }
            }

            exportAsTxt(stats, timestamp) {
                let content = 'TEXT ANALYSIS REPORT\n';
                content += '==================\n\n';
                content += `Analysis Date: ${new Date().toLocaleString()}\n\n`;
                content += 'BASIC STATISTICS:\n';
                content += `-----------------\n`;
                content += `Words: ${stats.words}\n`;
                content += `Characters: ${stats.characters}\n`;
                content += `Characters (no spaces): ${stats.charactersNoSpaces}\n`;
                content += `Sentences: ${stats.sentences}\n`;
                content += `Paragraphs: ${stats.paragraphs}\n\n`;
                content += 'ADVANCED ANALYSIS:\n';
                content += '------------------\n';
                content += `Average words per sentence: ${stats.avgWordsPerSentence}\n`;
                content += `Reading time: ${stats.readingTime} minute(s)\n`;
                content += `Longest word: ${stats.longestWord}\n`;
                content += `Average word length: ${stats.avgWordLength} characters\n`;
                content += `Unique words: ${stats.uniqueWords}\n`;
                content += `Lexical diversity: ${stats.lexicalDiversity}%\n\n`;

                const sortedWords = Object.entries(stats.wordFrequency)
                    .sort(([,a], [,b]) => b - a);

                if (sortedWords.length > 0) {
                    content += 'WORD FREQUENCY ANALYSIS:\n';
                    content += '------------------------\n';
                    sortedWords.forEach(([word, count]) => {
                        content += `${word}: ${count}\n`;
                    });
                }

                this.downloadFile(content, `word-analysis-${timestamp}.txt`, 'text/plain');
                this.showNotification('TXT file downloaded!');
            }

            exportAsCsv(stats, timestamp) {
                let csv = 'Metric,Value\n';
                csv += `Words,${stats.words}\n`;
                csv += `Characters,${stats.characters}\n`;
                csv += `Characters (no spaces),${stats.charactersNoSpaces}\n`;
                csv += `Sentences,${stats.sentences}\n`;
                csv += `Paragraphs,${stats.paragraphs}\n`;
                csv += `Average words per sentence,${stats.avgWordsPerSentence}\n`;
                csv += `Reading time (minutes),${stats.readingTime}\n`;
                csv += `Longest word,${stats.longestWord}\n`;
                csv += `Average word length,${stats.avgWordLength}\n`;
                csv += `Unique words,${stats.uniqueWords}\n`;
                csv += `Lexical diversity (%),${stats.lexicalDiversity}\n\n`;

                csv += 'Word,Frequency\n';
                const sortedWords = Object.entries(stats.wordFrequency)
                    .sort(([,a], [,b]) => b - a);
                sortedWords.forEach(([word, count]) => {
                    csv += `"${word}",${count}\n`;
                });

                this.downloadFile(csv, `word-analysis-${timestamp}.csv`, 'text/csv');
                this.showNotification('CSV file downloaded!');
            }

            exportAsJson(stats, timestamp) {
                const exportData = {
                    analysis_date: new Date().toISOString(),
                    text_statistics: {
                        words: stats.words,
                        characters: stats.characters,
                        characters_no_spaces: stats.charactersNoSpaces,
                        sentences: stats.sentences,
                        paragraphs: stats.paragraphs,
                        average_words_per_sentence: stats.avgWordsPerSentence,
                        reading_time_minutes: stats.readingTime,
                        longest_word: stats.longestWord,
                        average_word_length: stats.avgWordLength,
                        unique_words: stats.uniqueWords,
                        lexical_diversity_percent: stats.lexicalDiversity
                    },
                    word_frequency: stats.wordFrequency
                };

                const json = JSON.stringify(exportData, null, 2);
                this.downloadFile(json, `word-analysis-${timestamp}.json`, 'application/json');
                this.showNotification('JSON file downloaded!');
            }

            async copyToClipboard(text) {
                try {
                    await navigator.clipboard.writeText(text);
                } catch (err) {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                }
            }

            downloadFile(content, filename, mimeType) {
                const blob = new Blob([content], { type: mimeType });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.className = `notification ${type}`;
                notification.classList.add('show');

                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }

        // Initialize the word counter
        let wordCounter;
        document.addEventListener('DOMContentLoaded', () => {
            wordCounter = new WordCounter();
        });
    </script>
</body>
</html>
